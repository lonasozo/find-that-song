<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Playlist Generator - Find That Song</title>
  <link rel="stylesheet" href="/css/styles.css">
  <link rel="stylesheet" href="/css/playlist-generator.css">
  <script>
    // Check for dark mode preference
    if (localStorage.getItem('theme') === 'dark' || 
        (!localStorage.getItem('theme') && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
        document.documentElement.setAttribute('data-theme', 'dark');
    } else {
        document.documentElement.setAttribute('data-theme', 'light');
    }
  </script>
  <style>
    /* Custom styling for multi-select dropdown */
    select[multiple] {
      height: auto;
      min-height: 100px;
      background-image: none;
      padding: 8px;
    }
    select[multiple] option {
      padding: 8px;
      margin-bottom: 3px;
      border-radius: 4px;
      background-color: #f0f0f0;
      color: #333;
    }
    select[multiple] option:checked {
      background-color: #1DB954;
      color: white;
    }
    .genres-hint {
      display: block;
      margin-top: 5px;
      font-size: 0.8em;
      color: #777;
    }
  </style>
</head>
<body>
  <div class="generator-container">
    <header>
      <h1>Playlist Generator</h1>
      <div class="nav-links">
        <a href="/" class="home-link">Home</a>
      </div>
    </header>

    <div class="generator-form-container">
      <form id="playlist-form">
        <input type="hidden" name="access_token" value="<%= access_token %>">
        
        <div class="form-group">
          <label for="name">Playlist Name</label>
          <input type="text" id="name" name="name" required 
                 value="<%= defaultPlaylistName %>" 
                 placeholder="My Awesome Playlist">
        </div>

        <div class="form-group">
          <label for="type">Generation Type</label>
          <select id="type" name="type" required>
            <option value="top_artists" selected>Based on My Top Artists</option>
            <option value="genres">Based on Genres</option>
          </select>
        </div>

        <div class="form-group genres-container" style="display: none;">
          <label for="genres">Select Genres (max 5)</label>
          <select id="genres" name="genres" multiple size="10">
            <!-- Simplified list of most reliable genres -->
            <option value="pop">Pop</option>
            <option value="rock">Rock</option>
            <option value="hip-hop">Hip-Hop</option>
            <option value="electronic">Electronic</option>
            <option value="indie">Indie</option>
            <option value="jazz">Jazz</option>
            <option value="alternative">Alternative</option>
            <option value="classical">Classical</option>
            <option value="dance">Dance</option>
            <option value="folk">Folk</option>
            <option value="metal">Metal</option>
            <option value="blues">Blues</option>
            <option value="soul">Soul</option>
            <option value="punk">Punk</option>
            <option value="country">Country</option>
            <option value="r-n-b">R&B</option>
          </select>
          <small class="form-text text-muted">Hold Ctrl/Cmd to select multiple genres (up to 5)</small>
        </div>

        <div class="form-group">
          <label for="track_count">Number of Tracks</label>
          <input type="number" id="track_count" name="track_count" min="10" max="100" value="20">
        </div>

        <div class="form-actions">
          <button type="submit" class="submit-btn">Generate Playlist</button>
        </div>
      </form>

      <div id="loading-spinner" style="display: none; text-align: center; margin-top: 20px;">
        <div class="spinner"></div>
        <p>Creating your playlist...</p>
      </div>

      <div id="result"></div>
    </div>
  </div>

  

  <script src="/js/playlist-generator.js"></script>
 </body></html>